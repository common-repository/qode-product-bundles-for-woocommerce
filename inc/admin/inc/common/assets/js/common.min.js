(c=>{"object"!=typeof qodefWooFramework&&(window.qodefWooFramework={}),qodefWooFramework.scroll=0,qodefWooFramework.windowWidth=c(window).width(),qodefWooFramework.windowHeight=c(window).height(),c(document).ready(function(){var e=c(".qodef-page-v4-product-bundles"),o=c(".qodef-admin-page-v4"),t=c(".qodef-cpt-page");e.length?(n.init(e),s.init(e),d.init(e),a.init(),r.init(e),l.init(e),f.init(e),h.init(e),p.init(e),o.length&&u.init(o),m.init(e),i.init(),w.initColorPicker()):t.length&&a.adminReInit()}),c(window).scroll(function(){qodefWooFramework.scroll=c(window).scrollTop()}),c(window).resize(function(){qodefWooFramework.windowWidth=c(window).width(),qodefWooFramework.windowHeight=c(window).height(),600<qodefWooFramework.windowWidth&&void 0!==a.adminPage&&a.adminPage.length&&void 0!==a.adminHeader&&a.adminHeader.length&&a.adminHeader.css("width",a.adminPage.width())}),c(document).on("widget-added widget-updated",function(e,o){var t=void 0!==o?o.find('[name="id_base"]'):"";t&&t.val().includes("product-bundles")&&(w.initColorPicker(o),w.initDependency(o))}),c(document).on("ajaxSuccess",function(e,o,t){t&&t.data&&-1!==t.data.indexOf("action=add-tag")&&(t=c(".qodef-field-color")).length&&t.each(function(){var e=c(this).find(".wp-picker-clear");e.length&&e.trigger("click")})});var n={init:function(o){this.holder=o.filter(".qodef-tab-wrapper"),this.holder.length&&this.holder.each(function(){n.initTabs(o,c(this));var e=c(this).find(".qodef-tab-item-nav-wrapper");qodefWooFramework.qodefPerfectScrollbar.init(e,!1),n.initTabsDrag(e)})},initTabs:function(e,o){o.children(".qodef-tab-item-content").each(function(e){e+=1;var o=c(this),t=o.attr("id"),o=o.parent().find(".qodef-tab-item-nav-wrapper li:nth-child("+e+") a"),e=o.attr("href");-1<(t="#"+t).indexOf(e)&&o.attr("href",t)}),o.addClass("qodef--init").tabs({activate:function(){"object"==typeof qodefWooFramework.qodefAddressFields&&qodefWooFramework.qodefAddressFields.init(e,!0),c(document.body).trigger("qode_product_bundles_for_woocommerce_trigger_tab_change")}})},initTabsDrag:function(t){var o,n,i=!1;t.on("mousedown",function(e){e.preventDefault(),i=!0,t.addClass("qodef-drag"),o=e.pageX-t[0].offsetLeft,n=t[0].scrollLeft}),t.on("mousewheel",function(e,o){t[0].scrollLeft-=20*o,t[0].scrollRight-=20*o,e.preventDefault()}),t.on("mouseleave",function(){i=!1,t.removeClass("qodef-drag")}),t.on("mouseup",function(){i=!1,t.removeClass("qodef-drag")}),t.on("mousemove",function(e){i&&(e.preventDefault(),e=e.pageX-t[0].offsetLeft-o,t[0].scrollLeft=n-e)})}},s={init:function(e){s.initOptions(e),s.initMenu(),s.initWidget(),s.initProductAttributeTypeSelectBox()},initOptions:function(e){e=e.find(".qodef-field-content .qodef-field[data-option-name]");e.length&&s.initFields(e)},initMenu:function(){var e=c("#update-nav-menu .qodef-menu-item-field[data-option-name]");e.length&&s.initFields(e)},initWidget:function(){var e=c(".widget-content .qodef-widget-field[data-option-name]");e.length&&e.each(function(){var e=c(this);e.parents("#widget-list").length<=0&&s.initField(e)})},reinitRepeater:function(e){e=e.find(".qodef-repeater-fields-holder .qodef-field-content .qodef-field[data-option-name]");e.length&&e.each(function(){var e=c(this);switch(e.data("option-type")){case"selectbox":s.qodefSelectBoxDependencyRepeater(e);break;case"radiogroup":s.qodefRadioGroupDependencyRepeater(e)}s.initField(e)})},reinitWidget:function(e){s.initFields(e)},initFields:function(e){e.each(function(){var e=c(this);e.parents(".qodef-repeater-template").length<=0&&s.initField(e)})},initField:function(e){var o=e.data("option-type");if(!e.hasClass("qodef-dependency-option"))switch(e.addClass("qodef-dependency-option"),o){case"selectbox":s.qodefSelectBoxDependency(e);break;case"radiogroup":case"yesno":s.qodefRadioGroupDependency(e);break;case"checkbox":s.qodefCheckBoxDependency(e)}},qodefSelectBoxDependency:function(o){o.on("change",function(){var e=c(this).val();s.qodefDependencyActionInit(o,e)}),o.trigger("change")},qodefSelectBoxDependencyRepeater:function(e){var o=e.val();s.qodefDependencyActionInit(e,o)},qodefRadioGroupDependency:function(o){var e=o.data("option-name");o.find('input[name="'+e+'"]').on("change",function(){var e=this.value;s.qodefDependencyActionInit(o,e)}),s.qodefDependencyActionInit(o,o.find('input[name="'+o.data("option-name")+'"]:checked').val())},qodefRadioGroupDependencyRepeater:function(e){var o=e.data("option-name"),o=e.find('input[name="'+o+'"]').value;s.qodefDependencyActionInit(e,o)},qodefCheckBoxDependency:function(t){t.on("click",function(){var e=c(this),o=e.val();e.is(":checked")&&(o+="-checked"),s.qodefDependencyActionInit(t,o)})},qodefDependencyActionInit:function(e,r){var o=c(".qodef-dependency-holder"),l=e.data("option-name");"attribute_type"===e.prop("id")&&(l=e.attr("name")),o.length&&void 0!==l&&""!==l&&void 0!==r&&o.each(function(){var e=c(this),o=e.data("show"),t=e.data("hide"),n=e.data("relation"),i="and",a="",d=!0;""!==o&&void 0!==o&&(a=o),""!==t&&void 0!==t&&(a=t,d=!1),""!==n&&void 0!==n&&(i=n),""!==a&&(1<s.qodefGetNumberOfItems(a)?s.qodefMultipleDependencyLogic(a,e,l,r,d,i):s.qodefSingleDependencyLogic(a,e,l,r,d))})},qodefGetNumberOfItems:function(e){var o,t=0;for(o in e)e.hasOwnProperty(o)&&++t;return t},qodefMultipleDependencyLogic:function(e,o,l,s,t,n){var f=[],i=!0;if(c.each(e,function(e,o){if(o=o.split(","),l===e)-1!==o.indexOf(s)?f.push(!0):f.push(!1);else{var t=(i=c('.qodef-dependency-option[data-option-name="'+e+'"]')).data("option-type"),n="";if(0===i.length){var i,a=[],d=!1,t=(i=c('.qodef-dependency-option[data-option-name^="'+e+'["]')).data("option-type");if(i.length&&"checkbox"===t){for(var r in i.each(function(){c(this).is(":checked")&&((n=c(this).val()).length&&-1!==o.indexOf(n)?a.push(!0):a.push(!1))}),a)a[r]&&(d=!0);f.push(d)}}else{switch(t){case"selectbox":n=i.val();break;case"radiogroup":n=i.find('input[name="'+e+'"]:checked').val()}n.length&&-1!==o.indexOf(n)?f.push(!0):f.push(!1)}}}),"and"===n)for(var a in f)f[a]||(i=!1);else for(var a in i=!1,f)f[a]&&(i=!0);t?i?o.fadeIn(200):o.fadeOut(200):i?o.fadeOut(200):o.fadeIn(200)},qodefSingleDependencyLogic:function(e,n,i,a,d){c.each(e,function(e,o){var t="string"==typeof a?a.replace("-checked",""):"";i===e?(o=o.split(","),d?-1!==o.indexOf(a)?(n.removeClass("qodef-hide-dependency-holder"),n.addClass("qodef-show-dependency-holder")):(n.addClass("qodef-hide-dependency-holder"),n.removeClass("qodef-show-dependency-holder")):-1!==o.indexOf(a)?(n.addClass("qodef-hide-dependency-holder"),n.removeClass("qodef-show-dependency-holder")):(n.removeClass("qodef-hide-dependency-holder"),n.addClass("qodef-show-dependency-holder"))):i===e+"["+t+"]"&&t===o&&(d?-1!==o.indexOf(t)&&-1!==a.indexOf("-checked")?(n.removeClass("qodef-hide-dependency-holder"),n.addClass("qodef-show-dependency-holder")):(n.addClass("qodef-hide-dependency-holder"),n.removeClass("qodef-show-dependency-holder")):-1!==o.indexOf(t)&&-1!==a.indexOf("-checked")?(n.addClass("qodef-hide-dependency-holder"),n.removeClass("qodef-show-dependency-holder")):(n.removeClass("qodef-hide-dependency-holder"),n.addClass("qodef-show-dependency-holder")))})},initProductAttributeTypeSelectBox:function(){var e=c("#attribute_type");e.length&&s.qodefSelectBoxDependency(e)}},d=(qodefWooFramework.qodefDependency=s,{init:function(e){d.initRepeater(e),d.initRepeaterInner(e)},initRepeater:function(o){var e=o.find(".qodef-repeater-wrapper");e.length&&e.each(function(){var e=c(this);d.qodefAddNewRow(e,o),d.qodefToggleRow(e),d.qodefRemoveRow(e),d.qodefInitSortable(e)})},initRepeaterInner:function(o){var e=o.find(".qodef-repeater-inner-wrapper");e.length&&e.each(function(){var e=c(this);d.qodefAddNewRowInner(e,o),d.qodefToggleRowInner(e),d.qodefRemoveRowInner(e),d.qodefInitSortableInner(e)})},qodefGetNumberOfRows:function(e){return e.find(".qodef-repeater-fields-holder").length},qodefInitSortable:function(e){e.find(".qodef-repeater-wrapper-main.sortable").length&&c(".qodef-repeater-wrapper-main.sortable").sortable({placeholder:"qodef-placeholder",forcePlaceholderSize:!0,handle:".qodef-repeater-sort"}),d.qodefInitSortableInner(e)},qodefInitSortableInner:function(e){e.find(".qodef-repeater-inner-wrapper-main.sortable").length&&c(".qodef-repeater-inner-wrapper-main.sortable").sortable({placeholder:"qodef-placeholder",forcePlaceholderSize:!0,handle:".qodef-repeater-inner-sort"})},qodefAddNewRow:function(t,n){var e=t.find(".qodef-repeater-add a"),o=t.find(".qodef-repeater-wrapper-main").data("template"),i=t.find(".qodef-repeater-wrapper-main"),a=wp.template("qodef-repeater-template-"+o);e.off().on("tap click",function(e){e.preventDefault(),e.stopPropagation();var e=c(a({rowIndex:d.qodefGetNumberOfRows(t)||0})),o=(i.append(e),e.find(".qodef-repeater-inner-wrapper"));d.qodefAddNewRowInner(o,n),d.qodefToggleRowInner(o),d.qodefRemoveRowInner(o),d.qodefInitSortable(t),s.reinitRepeater(n),c(document).trigger("qode_product_bundles_for_woocommerce_add_new_row_trigger",e.find(".qodef-repeater-fields"))})},qodefToggleRow:function(e){e.find(".qodef-repeater-wrapper-main").on("click",".qodef-row-toggle",function(e){e.preventDefault(),e.stopPropagation();var o=c(this).parents(".qodef-repeater-fields-holder");o.children(".qodef-repeater-fields").stop().fadeToggle(300),o.hasClass("qodef--closed")?o.removeClass("qodef--closed"):setTimeout(function(){o.addClass("qodef--closed")},300)})},qodefRemoveRow:function(e){e.find(".qodef-repeater-wrapper-main").on("click",".qodef-clone-remove",function(e){e.preventDefault(),e.stopPropagation(),window.confirm("Are you sure you want to remove this section?")&&c(this).parents(".qodef-repeater-fields-holder").remove()})},qodefAddNewRowInner:function(n,i){var e=n.find(".qodef-repeater-inner-add a"),o=n.find(".qodef-repeater-inner-wrapper-main").data("template"),a=wp.template("qodef-repeater-inner-template-"+o);e.off().on("click",function(e){e.preventDefault(),e.stopPropagation();var e=c(this),o=e.parents(".qodef-repeater-fields-holder").first(),t=o.data("index"),e=e.parent().parent().prev(),o=o.find(".qodef-repeater-inner-fields-holder").length,t=c(a({rowIndex:t,rowInnerIndex:o}));e.append(t),d.qodefInitSortableInner(n),s.reinitRepeater(i)})},qodefToggleRowInner:function(e){e.find(".qodef-repeater-inner-wrapper-main").on("click",".qodef-row-toggle",function(e){e.preventDefault(),e.stopPropagation();var o=c(this).parents(".qodef-repeater-inner-fields-holder");o.children(".qodef-repeater-inner-fields").stop().fadeToggle(300),o.hasClass("qodef--closed")?o.removeClass("qodef--closed"):setTimeout(function(){o.addClass("qodef--closed")},300)})},qodefRemoveRowInner:function(e){e.find(".qodef-repeater-inner-wrapper-main").on("click",".qodef-clone-inner-remove",function(e){e.preventDefault(),e.stopPropagation(),confirm("Are you sure you want to remove section?")&&c(this).parents(".qodef-repeater-inner-fields-holder").remove()})}}),t={init:function(e,o){e.length&&t.qodefInitScroll(e,void 0===o||o)},qodefInitScroll:function(e,o){var t=new PerfectScrollbar(e[0],{wheelSpeed:.6,suppressScrollX:o});c(window).resize(function(){t.update()})}},i=(qodefWooFramework.qodefPerfectScrollbar=t,{init:function(){c(document).on("qode_product_bundles_for_woocommerce_add_new_row_trigger",function(e,o){void 0!==u.fieldHolder&&u.fieldHolder.push(o),r.reinit(o),l.reinit(o),f.reinit(o),h.reinit(o),p.reinit(o)})}}),a={init:function(){this.adminPage=c(".qodef-admin-page-v4"),this.adminPage.length&&(this.adminHeaderPosition(),this.navigationInit(),this.saveOptionsInit(this.adminPage),this.setActivePanel(),this.navigationReset(),qodefWooFramework.windowWidth<=1180)&&this.mobile(this.adminPage)},mobile:function(e){var o=e.find(".qodef-mobile-nav-opener"),t=e.find(".qodef-tabs-navigation-wrapper"),e=e.find(".qodef-tabs-navigation-wrapper-inner");qodefWooFramework.qodefPerfectScrollbar.init(e),o.on("click tap",function(e){e.preventDefault(),t.hasClass("qodef--show")?(t.removeClass("qodef--show"),g.enable()):(t.addClass("qodef--show"),g.disable())}),c(document).on("click",function(e){c(e.target).closest(".qodef-tabs-navigation-wrapper, .qodef-mobile-nav-opener").length||t.hasClass("qodef--show")&&(t.removeClass("qodef--show"),g.enable())})},navigationReset:function(){null!==new URLSearchParams(window.location.search).get("template")&&this.adminPage.find(".qodef-tabs-navigation-wrapper .navbar ul li").removeClass("qodef-active")},navigationInit:function(){this.adminPage.find(".qodef-tabs-navigation-wrapper .navbar ul li").on("click",function(){u.resetSearchView(),u.resetSearchField(),a.initTabNavItemClick(c(this)),a.initNavItemClick(c(this),!0)})},adminReInit:function(){this.adminPage=c(".qodef-admin-page-v4"),this.adminHeaderPosition(),qodefWooFramework.windowWidth<=1180&&this.mobile(this.adminPage),this.adminPage.find(".qodef-tabs-navigation-wrapper .navbar ul li").on("click",function(){a.initTabNavItemClick(c(this)),a.initNavItemClick(c(this),!0)})},initTabNavItemClick:function(e){var o=e.find(".nav-link").data("section"),t=new URLSearchParams(window.location.search),n=t.get("template"),i=t.get("post_type"),a=t.get("post"),t=t.get("taxonomy");null===n&&null===i&&null===a&&null===t||(this.setCookie("qodefProductBundlesActiveTab",o),window.location=e.data("options-url"))},initNavItemClick:function(e,o){var t,n;e.length&&(t=e.find(".nav-link").data("section"),e.hasClass("qodef-layout-custom")&&!e.hasClass("qodef-active")&&o&&e.data("options-url")?(this.setCookie("qodefProductBundlesActiveTab",t),window.location=e.data("options-url")):e.hasClass("qodef-layout-custom")&&e.hasClass("qodef-active")&&o&&e.data("options-url")?window.location=e.data("options-url"):((o=this.adminPage.find(".qodef-tabs-content")).find(".tab-content:visible").addClass("qodef-hide-pane"),(n=o.find(".tab-content[data-section="+t+"]")).removeClass("qodef-hide-pane"),e.siblings(".qodef-active").removeClass("qodef-active"),e.addClass("qodef-active"),this.setCookie("qodefProductBundlesActiveTab",t),setTimeout(function(){qodefWooFramework.qodefColorPicker.checkFieldPosition(n),c(document.body).on("qode_product_bundles_for_woocommerce_trigger_tab_change",function(){qodefWooFramework.qodefColorPicker.checkFieldPosition(n)})},500)))},setActivePanel:function(){var e=this.getCookie("qodefProductBundlesActiveTab"),o=new URLSearchParams(window.location.search),t=o.get("post"),o=o.get("post_type");null===t&&null===o&&(""!==e&&"undefined"!==e?this.initNavItemClick(c(".qodef-tabs-navigation-wrapper .nav-link[data-section="+e+"]").parent()):this.initNavItemClick(c(".qodef-tabs-navigation-wrapper .navbar ul li:first-child")))},saveOptionsInit:function(i){this.optionsForm=this.adminPage.find("#qode_product_bundles_for_woocommerce_framework_ajax_form");var a,d=c(".qodef-save-reset-loading"),r=c(".qodef-save-success");this.optionsForm.length&&(c(".qodef-save-reset-button").on("click",function(){a=c(this).attr("name")}),this.optionsForm.on("submit",function(e){e.preventDefault(),e.stopPropagation(),d.addClass("qodef-show-loader"),i.addClass("qodef-save-reset-disable");var e=c(this),o={action:("qodef_save"===a?"qode_product_bundles_for_woocommerce_action_framework_save_options_":"qode_product_bundles_for_woocommerce_action_framework_reset_options_")+e.data("options-name"),options_name:e.data("options-name")},t=e.find("[class*=qodef-page-v4]:not(.qodef-exclude-panel-from-saving) :input"),n=e.find(" > :input");e.siblings(":input").length&&(n=e.siblings(":input")),c.ajax({type:"POST",url:ajaxurl,cache:!1,data:c.param(o,!0)+"&"+t.serialize()+"&"+n.serialize(),success:function(){switch(d.removeClass("qodef-show-loader"),a){case"qodef_reset":window.location.reload(!0);break;case"qodef_save":i.removeClass("qodef-save-reset-disable"),r.fadeIn(300),setTimeout(function(){r.fadeOut(200)},2e3)}}})}))},setCookie:function(e,o){document.cookie=e+"="+o},getCookie:function(e){for(var o=e+"=",t=decodeURIComponent(document.cookie).split(";"),n=t.length,i=0;i<n;i++){for(var a=t[i];" "===a.charAt(0);)a=a.substring(1);if(0===a.indexOf(o))return a.substring(o.length,a.length)}return""},adminHeaderPosition:function(){this.adminPage=c(".qodef-admin-page-v4"),this.adminHeader=c(".qodef-admin-header"),this.adminPage.length&&this.adminHeader.length&&600<qodefWooFramework.windowWidth&&(this.adminBarHeight=c("#wpadminbar").height(),this.adminHeaderHeight=this.adminHeader.outerHeight(!0),this.adminHeaderTopPosition=this.adminHeader.offset().top-parseInt(this.adminBarHeight),this.adminContent=c(".qodef-admin-content"),this.adminNavigation=c(".qodef-tabs-navigation-wrapper"),this.adminHeader.css("width",this.adminPage.width()),c(window).on("scroll load",function(){qodefWooFramework.scroll>=a.adminHeaderTopPosition?(a.adminHeader.addClass("qodef-fixed").css("top",parseInt(a.adminBarHeight)),a.adminContent.css("marginTop",a.adminHeaderHeight),1180<qodefWooFramework.windowWidth?a.adminNavigation.css("marginTop",0):qodefWooFramework.windowWidth<=1180&&a.adminNavigation.css("marginTop",a.adminBarHeight+a.adminHeaderHeight)):(a.adminHeader.removeClass("qodef-fixed").css("top",0),a.adminContent.css("marginTop",0),1180<qodefWooFramework.windowWidth?a.adminNavigation.css("marginTop",a.adminHeaderHeight):qodefWooFramework.windowWidth<=1180&&a.adminNavigation.css("marginTop",a.adminHeader.offset().top+a.adminHeaderHeight-qodefWooFramework.scroll))}))}},r={init:function(e){this.$holder=e.find(".qodef-image-uploader"),this.$holder.length&&this.$holder.each(function(){r.initField(c(this))})},reinit:function(e){e=c(e).find(".qodef-image-uploader");e.length&&e.each(function(){r.initField(c(this))})},initField:function(e){var t={$multiple:"yes"===e.data("multiple")&&"no"===e.data("file"),$file:"yes"===e.data("file"),$allowed_type:"yes"===e.data("file")?e.data("allowed-type"):"image",$imageHolder:e,mediaFrame:"",attachment:"",$thumbImageHolder:e.find(".qodef-image-thumb"),$uploadId:e.find(".qodef-image-upload-id"),$removeButton:e.find(".qodef-image-remove-btn")};t.$thumbImageHolder.find("img").length&&(t.$removeButton.show(),r.remove(t.$removeButton)),r.reset(e),t.$imageHolder.on("click",".qodef-image-upload-btn",function(){t.mediaFrame||(t.mediaFrame=wp.media.frames.fileFrame=wp.media({title:c(this).data("frame-title"),button:{text:c(this).data("frame-button-text")},library:{type:t.$allowed_type},multiple:t.$multiple}),t.$file?r.fileSelect(t):t.$multiple?r.multipleSelect(t):r.singleSelect(t),t.mediaFrame.on("open",function(){var o=t.mediaFrame.state().get("selection");t.$uploadId.val().split(",").forEach(function(e){t.attachment=wp.media.attachment(e),t.attachment.fetch(),o.add(t.attachment?[t.attachment]:[])})})),t.mediaFrame.open()})},multipleSelect:function(n){n.mediaFrame.on("select",function(){n.attachment=n.mediaFrame.state().get("selection").map(function(e){return e.toJSON(),e}),n.$removeButton.show().trigger("change"),r.remove(n.$removeButton);for(var e=c.map(n.attachment,function(e){if("image"===e.attributes.type)return e.id}),o=(n.$uploadId.val(e),n.$thumbImageHolder.find("ul").empty().trigger("change"),n.attachment.length),t=0;t<o;++t)void 0!==n.attachment[t].attributes.sizes.thumbnail?n.$thumbImageHolder.find("ul").append('<li><img src="'+n.attachment[t].attributes.sizes.thumbnail.url+'" alt="thumbnail" /></li>'):n.$thumbImageHolder.find("ul").append('<li><img src="'+n.attachment[t].attributes.sizes.full.url+'" alt="thumbnail" /></li>');n.$thumbImageHolder.show().trigger("change")})},singleSelect:function(e){e.mediaFrame.on("select",function(){e.attachment=e.mediaFrame.state().get("selection").first().toJSON(),e.attachment.hasOwnProperty("url")&&"image"===e.attachment.type&&(e.$removeButton.show(),r.remove(e.$removeButton),e.$uploadId.val(e.attachment.id),e.$thumbImageHolder.empty(),e.attachment.hasOwnProperty("sizes")&&e.attachment.sizes.thumbnail?e.$thumbImageHolder.append('<img class="qodef-single-image" src="'+e.attachment.sizes.thumbnail.url+'" alt="thumbnail" />'):e.$thumbImageHolder.append('<img class="qodef-single-image" src="'+e.attachment.url+'" alt="thumbnail" />'),e.$thumbImageHolder.show().trigger("change"))})},fileSelect:function(e){e.mediaFrame.on("select",function(){e.attachment=e.mediaFrame.state().get("selection").first().toJSON(),e.attachment.hasOwnProperty("url")&&e.$allowed_type.includes(e.attachment.type)&&(e.$removeButton.show(),r.remove(e.$removeButton),e.$uploadId.val(e.attachment.id),e.$thumbImageHolder.empty(),e.$thumbImageHolder.append('<img class="qodef-file-image" src="'+e.attachment.icon+'" alt="thumbnail" /><div class="qodef-file-name">'+e.attachment.filename+"</div>"),e.$thumbImageHolder.show().trigger("change"))})},remove:function(e){e.on("click",function(){e.siblings(".qodef-image-thumb").hide(),e.siblings(".qodef-image-thumb").find("img").attr("src",""),e.siblings(".qodef-image-thumb").find("li").remove(),e.siblings(".qodef-image-meta-fields").find('input[type="hidden"]').each(function(){c(this).val("")}),e.hide().trigger("change")})},reset:function(n){c(document).on("ajaxSuccess",function(e,o,t){t&&t.data&&-1===t.data.indexOf("action=add-tag")||(n.find(".qodef-image-thumb").hide(),n.find(".qodef-image-thumb").find("img").attr("src",""),n.find(".qodef-image-thumb").find("li").remove(),n.find(".qodef-image-meta-fields").find('input[type="hidden"]').each(function(){c(this).val("")}))})}},l=(qodefWooFramework.qodefInitMediaUploader=r,{init:function(e){this.$holder=e.find(".qodef-color-field:not(.widefat)"),this.$holder.length&&this.$holder.each(function(){l.initField(c(this))})},reinit:function(e){e=c(e).find(".qodef-color-field:not(.widefat)");e.length&&l.initField(e)},initField:function(e){e.wpColorPicker({palettes:!1,mode:"hsl"})},checkFieldPosition:function(e){e=e.find(".qodef-color-field:not(.widefat)");e.length&&e.each(function(){var e=c(this).parents(".qodef-field-content"),o=c("#wpbody-content");o.length&&o.outerHeight()-e.offset().top<340&&e.addClass("qodef-color-picker-reverse")})}}),f=(qodefWooFramework.qodefColorPicker=l,{init:function(e){this.$holder=e.find(".qodef-datepicker"),this.$holder.length&&this.$holder.each(function(){f.initField(c(this))})},reinit:function(e){e=c(e).find(".qodef-datepicker");e.length&&f.initField(e)},initField:function(e){var o=e.data("date-format");e.datepicker({dateFormat:o})}}),h=(qodefWooFramework.qodefDatePicker=f,{init:function(e){this.$holder=e.find("select.qodef-select2"),this.$holder.length&&this.$holder.each(function(){h.initField(c(this))})},reinit:function(e){e=c(e).find("select.qodef-select2");e.length&&h.initField(e)},initField:function(e){"function"==typeof e.select2&&e.select2({width:"100%",allowClear:!1,minimumResultsForSearch:11,dropdownCssClass:"qodef-select-v4"})}}),p=(qodefWooFramework.select2=h,{init:function(e){this.$holder=e.find(".qodef-iconpicker-select:not(.qodef-select2):not(.qodef--icons-init)"),this.$holder.length&&this.$holder.each(function(){var e=c(this);"function"==typeof e.fontIconPicker&&(e.addClass("qodef--icons-init"),e.fontIconPicker())})},reinit:function(e,o){o=void 0!==o&&""!==o&&!1!==o?o:c(e).find(".qodef-iconpicker-select:not(.qodef-select2)");o.length&&!o.hasClass("qodef--icons-init")&&"function"==typeof o.fontIconPicker&&(o.addClass("qodef--icons-init"),o.fontIconPicker())}}),m=(qodefWooFramework.qodefInitIconPicker=p,{init:function(e,o){this.$addressHolder=e.find(".qodef-address-field-holder"),this.$addressHolder.length&&this.$addressHolder.each(function(){m.initMap(c(this),o)})},initMap:function(e,o){var t=e.find(".qodef-reset-marker"),n=e.find("input"),i=e.find(".qodef-map-canvas"),a=e.data("country"),d=e.data("lat"),r=c('.qodef-address-elements [name="'+d+'"]'),d=e.data("lng"),l=c('.qodef-address-elements [name="'+d+'"]');o&&n.trigger("geocode"),"function"==typeof n.geocomplete&&void 0===o&&(n.geocomplete({map:i,details:".qodef-address-elements",detailsAttribute:"data-geo",types:["geocode","establishment"],country:a,markerOptions:{draggable:!0}}).bind("geocode:result",function(){t.show()}),n.on("geocode:dragged",function(e,o){r.val(o.lat()),l.val(o.lng()),t.show(),n.geocomplete("map").panTo(o),(new google.maps.Geocoder).geocode({latLng:o},function(e,o){o===google.maps.GeocoderStatus.OK&&"object"==typeof e[0]&&n.val(e[0].formatted_address)})}),n.on("focus",function(){var e=n.geocomplete("map");google.maps.event.trigger(e,"resize")}),t.on("click",function(e){e.preventDefault(),t.hide(),n.geocomplete("resetMarker").val(""),r.val(""),l.val("")}),c(window).on("load",function(){n.trigger("geocode")}))}}),u=(qodefWooFramework.qodefAddressFields=m,{init:function(e){var t,n,i;this.searchField=e.find(".qodef-search-field"),this.adminContent=e.find(".qodef-admin-content"),this.tabHolder=e.find(".tab-content"),this.rowHolder=e.find(".qodef-row-wrapper"),this.sectionHolder=e.find(".qodef-section-wrapper"),this.repeaterHolder=e.find(".qodef-repeater-wrapper"),this.fieldHolder=e.find(".qodef-field-holder"),this.searchField.length&&(t=this.searchField.next(".qodef-search-loading"),this.searchField.on("keyup paste",function(){var o=c(this);o.attr("autocomplete","off"),t.removeClass("qodef-hidden"),clearTimeout(i),i=setTimeout(function(){var e=o.val();n=new RegExp(o.val(),"gi"),t.addClass("qodef-hidden"),e.length<3?u.resetSearchView():(u.resetSearchView(),u.adminContent.addClass("qodef-apply-search"),u.fieldHolder.each(function(){var e=c(this);-1!==e.find(".qodef-field-desc").text().search(n)?(e.parents(".tab-content").addClass("qodef-search-show"),e.parents(".qodef-section-wrapper").addClass("qodef-search-show"),e.parents(".qodef-row-wrapper").addClass("qodef-search-show"),e.parents(".qodef-repeater-wrapper").addClass("qodef-search-show")):e.addClass("qodef-search-hide")}))},500)}))},resetSearchView:function(){this.adminContent.removeClass("qodef-apply-search"),this.tabHolder.removeClass("qodef-search-show"),this.rowHolder.removeClass("qodef-search-show"),this.sectionHolder.removeClass("qodef-search-show"),this.repeaterHolder.removeClass("qodef-search-show"),this.fieldHolder.removeClass("qodef-search-hide")},resetSearchField:function(){this.searchField.val("")}}),g=(qodefWooFramework.qodefSearchOptions=u,{disable:function(){window.addEventListener&&(window.addEventListener("wheel",g.preventDefaultValue,{passive:!1}),window.addEventListener("touchmove",g.preventDefaultValue,{passive:!1})),document.onkeydown=g.keyDown},enable:function(){window.removeEventListener&&(window.removeEventListener("wheel",g.preventDefaultValue,{passive:!1}),window.removeEventListener("touchmove",g.preventDefaultValue,{passive:!1})),window.onmousewheel=document.onmousewheel=document.onkeydown=null},preventDefaultValue:function(e){(e=e||window.event).preventDefault&&e.preventDefault(),e.returnValue=!1},keyDown:function(e){for(var o=[37,38,39,40],t=o.length;t--;)if(e.keyCode===o[t])return void g.preventDefaultValue(e)}}),q={init:function(e,o){var t=e.find(".qodef-checkbox-group-holder"),n=o.find(".qodef-field").val();n&&!n.trim()||q.multipleSelectSetOrder(t,n),q.multipleSelectSaveNewOrder(q.multipleSelectGetNewOrder(e),o),t.sortable({opacity:.6,stop:function(){q.multipleSelectSaveNewOrder(q.multipleSelectGetNewOrder(e),o)}})},multipleSelectSaveNewOrder:function(e,o){o.find(".qodef-field").val(e)},multipleSelectSetOrder:function(e,t){var o=e.find(".qodef-inline:not(.qodef-hide)");o.sort(function(e,o){e=c(e).find(".qodef-field").val(),o=c(o).find(".qodef-field").val();return t.indexOf(e)-t.indexOf(o)}),e.empty(),o.each(function(){e.append(c(this))})},multipleSelectGetNewOrder:function(e){var e=e.find(".qodef-inline:not(.qodef-hide) .qodef-field"),o="";return e.length&&e.each(function(e){o+=(0===e?"":",")+c(this).val()}),o}},w=(qodefWooFramework.qodefDragAndDropCheckboxFields=q,{initColorPicker:function(e){e=void 0!==e?e.find(".qodef-widget-field--color"):c("#widgets-right .qodef-widget-field--color");e.length&&w.initPickerField(e,e.find(".qodef-color-field"))},initPickerField:function(e,o){o.length&&e.find(".wp-picker-container").length<=0&&o.wpColorPicker({change:_.throttle(function(){c(this).trigger("change")},3e3)})},initDependency:function(e){e=e.find(".widget-content .qodef-widget-field[data-option-name]");e.length&&qodefWooFramework.qodefDependency.reinitWidget(e)}})})(jQuery);